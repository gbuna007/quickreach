<div class="wrapperbody">
  <%= render "shared/sidebar" %>
  <div class="main-content ms-3" data-controller="new-template">

    <div class ="navbar mx-5 my-1">
      <div><h1>Templates</h1></div>
    </div>

    <div class="trigger-labels">
      <p>Date Added</p>
      <p class="col-2 flex-grow-1 ms-2">Template Name</p>
      <p class="col-6">Variables</p>
    </div>

    <div class="new-template border border-success d-flex justify-content-center mb-3" >
      <p class="align-self-center" data-action="click->new-template#revealForm">New template</p>
    </div>
    <div class="template-form d-none" data-new-template-target="form">
        <%= simple_form_for(@template) do |f| %>
          <%= f.input :name %>
          <%= f.input :subject %>
          <%= f.input :body %>
          <%= f.submit %>
        <% end %>
    </div>
    <div class="existing-templates" data-new-template-target="rows"></div>
      <% @templates.each do |template| %>
        <div class="info shadow-sm">
          <p><%= template.updated_at.strftime("%D") %></p>
          <div class="info-content col-3">
            <%= template.name %>
          </div>
          <div class="info-content col-3">
            <%= template.body.scan(/<<(.+?)>>/).flatten.join(", ") %>
          </div>

          <div class="info-actions">
            <a href="#">Edit <i class="fas fa-pencil-alt"></i></a>
            <a href="#">Delete <i class="far fa-trash-alt"></i></a>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
